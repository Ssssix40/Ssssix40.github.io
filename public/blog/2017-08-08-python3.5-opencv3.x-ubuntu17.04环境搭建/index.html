<!DOCTYPE html>
<html lang="zh-Hans">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://localhost:1313/images/favicon.png" />
<title>python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建 | spiritshaman</title>
<meta name="title" content="python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建" />
<meta name="description" content="第一步 更新 $ sudo apt-get update $ sudo apt-get upgrade 第二步 环境搭建 1 必要软件 $ sudo apt-get install build-essential cmake cmake-qt-gui pkg-config git 2 图像格式相关 $ sudo apt-get install libpng-dev libjpeg-dev libtiff5-dev 3 GUI相关 $ sudo apt-get install libgtk2.0-dev 4 视频格式相关 $ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev $ sudo apt-get install libxvidcore-dev libx264-dev 5 C&#43;&#43;多线程相关 $ sudo apt-get install libtbb2 libtbb-dev 6 摄像头相关 $ sudo apt-get install libdc1394-22-dev 7 opengl相关 $ sudo apt-get install libgtkglext1 libgtkglext1-dev 8 矩阵运算相关 $ sudo apt-get install libatlas-base-dev gfortran 9 python $ sudo apt-get install python3." />
<meta name="keywords" content="python-opencv,环境搭建," />


<meta property="og:title" content="python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建" />
<meta property="og:description" content="第一步 更新 $ sudo apt-get update $ sudo apt-get upgrade 第二步 环境搭建 1 必要软件 $ sudo apt-get install build-essential cmake cmake-qt-gui pkg-config git 2 图像格式相关 $ sudo apt-get install libpng-dev libjpeg-dev libtiff5-dev 3 GUI相关 $ sudo apt-get install libgtk2.0-dev 4 视频格式相关 $ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev $ sudo apt-get install libxvidcore-dev libx264-dev 5 C&#43;&#43;多线程相关 $ sudo apt-get install libtbb2 libtbb-dev 6 摄像头相关 $ sudo apt-get install libdc1394-22-dev 7 opengl相关 $ sudo apt-get install libgtkglext1 libgtkglext1-dev 8 矩阵运算相关 $ sudo apt-get install libatlas-base-dev gfortran 9 python $ sudo apt-get install python3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/blog/2017-08-08-python3.5-opencv3.x-ubuntu17.04%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" /><meta property="og:image" content="http://localhost:1313/images/share.webp" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2018-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-01-01T00:00:00+00:00" /><meta property="og:site_name" content="Bear Cub" />




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/share.webp" /><meta name="twitter:title" content="python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建"/>
<meta name="twitter:description" content="第一步 更新 $ sudo apt-get update $ sudo apt-get upgrade 第二步 环境搭建 1 必要软件 $ sudo apt-get install build-essential cmake cmake-qt-gui pkg-config git 2 图像格式相关 $ sudo apt-get install libpng-dev libjpeg-dev libtiff5-dev 3 GUI相关 $ sudo apt-get install libgtk2.0-dev 4 视频格式相关 $ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev $ sudo apt-get install libxvidcore-dev libx264-dev 5 C&#43;&#43;多线程相关 $ sudo apt-get install libtbb2 libtbb-dev 6 摄像头相关 $ sudo apt-get install libdc1394-22-dev 7 opengl相关 $ sudo apt-get install libgtkglext1 libgtkglext1-dev 8 矩阵运算相关 $ sudo apt-get install libatlas-base-dev gfortran 9 python $ sudo apt-get install python3."/>
<meta name="twitter:site" content="@Since640"/>



<meta itemprop="name" content="python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建">
<meta itemprop="description" content="第一步 更新 $ sudo apt-get update $ sudo apt-get upgrade 第二步 环境搭建 1 必要软件 $ sudo apt-get install build-essential cmake cmake-qt-gui pkg-config git 2 图像格式相关 $ sudo apt-get install libpng-dev libjpeg-dev libtiff5-dev 3 GUI相关 $ sudo apt-get install libgtk2.0-dev 4 视频格式相关 $ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev $ sudo apt-get install libxvidcore-dev libx264-dev 5 C&#43;&#43;多线程相关 $ sudo apt-get install libtbb2 libtbb-dev 6 摄像头相关 $ sudo apt-get install libdc1394-22-dev 7 opengl相关 $ sudo apt-get install libgtkglext1 libgtkglext1-dev 8 矩阵运算相关 $ sudo apt-get install libatlas-base-dev gfortran 9 python $ sudo apt-get install python3."><meta itemprop="datePublished" content="2018-01-01T00:00:00+00:00" />
<meta itemprop="dateModified" content="2018-01-01T00:00:00+00:00" />
<meta itemprop="wordCount" content="322"><meta itemprop="image" content="http://localhost:1313/images/share.webp" />
<meta itemprop="keywords" content="python-opencv,环境搭建," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
      --width: 800px;
      --font-main: Verdana, sans-serif;
      --font-secondary: Verdana, sans-serif;
      --font-scale: 1em;
      --background-color: #fff;
      --heading-color: #222;
      --text-color: #444;
      --link-color: #3273dc;
      --visited-color:  #8b6fcb;
      --code-background-color: #f2f2f2;
      --code-color: #222;
      --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
      :root {
          --background-color: #333;
          --heading-color: #eee;
          --text-color: #ddd;
          --link-color: #8cc2dd;
          --visited-color:  #8b6fcb;
          --code-background-color: #777;
          --code-color: #ddd;
          --blockquote-color: #ccc;
      }
  }

  body {
      font-family: var(--font-secondary);
      font-size: var(--font-scale);
      margin: auto;
      padding: 20px;
      max-width: var(--width);
      text-align: left;
      background-color: var(--background-color);
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.5;
      color: var(--text-color);
  }

  h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-main);
      color: var(--heading-color);
  }

  a {
      color: var(--link-color);
      cursor: pointer;
      text-decoration: none;
  }

  a:hover {
      text-decoration: underline; 
  }

  nav a {
      margin-right: 8px;
  }

  strong, b {
      color: var(--heading-color);
  }

  button {
      margin: 0;
      cursor: pointer;
  }

  main {
      line-height: 1.6;
  }

  table {
      width: 100%;
  }

  hr {
      border: 0;
      border-top: 1px dashed;
  }

  img {
      max-width: 100%;
  }

  code {
      font-family: monospace;
      padding: 2px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
  }

  blockquote {
      border-left: 1px solid #999;
      color: var(--code-color);
      padding-left: 20px;
      font-style: italic;
  }

  footer {
      padding: 25px 0;
      text-align: center;
  }

  .title:hover {
      text-decoration: none;
  }

  .title h1 {
      font-size: 1.5em;
  }

  .inline {
      width: auto !important;
  }

  .highlight, .code {
      padding: 1px 15px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
      margin-block-start: 1em;
      margin-block-end: 1em;
      overflow-x: auto;
  }

   
  ul.blog-posts {
      list-style-type: none;
      padding: unset;
  }

  ul.blog-posts li {
      display: flex;
  }

  ul.blog-posts li span {
      flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
      color: var(--visited-color);
  }
</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>spiritshaman</h2>
</a>
<nav><a href="/">Home</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>python3.5&#43;opencv3.x&#43;ubuntu17.04 环境搭建</h1>
<p>
  <i>
    <time datetime='2018-01-01'>
      2018-01-01
    </time>
  </i>
</p>

<content>
  <h2 id="第一步-更新">第一步 更新</h2>
<pre tabindex="0"><code>$ sudo apt-get update
$ sudo apt-get upgrade
</code></pre><h2 id="第二步-环境搭建">第二步 环境搭建</h2>
<h3 id="1-必要软件">1 必要软件</h3>
<pre tabindex="0"><code>$ sudo apt-get install build-essential cmake cmake-qt-gui pkg-config git
</code></pre><h3 id="2-图像格式相关">2 图像格式相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libpng-dev libjpeg-dev libtiff5-dev
</code></pre><h3 id="3-gui相关">3 GUI相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libgtk2.0-dev
</code></pre><h3 id="4-视频格式相关">4 视频格式相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev
$ sudo apt-get install libxvidcore-dev libx264-dev
</code></pre><h3 id="5--c多线程相关">5  C++多线程相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libtbb2 libtbb-dev
</code></pre><h3 id="6-摄像头相关">6 摄像头相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libdc1394-22-dev
</code></pre><h3 id="7-opengl相关">7 opengl相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libgtkglext1 libgtkglext1-dev
</code></pre><h3 id="8-矩阵运算相关">8 矩阵运算相关</h3>
<pre tabindex="0"><code>$ sudo apt-get install libatlas-base-dev gfortran
</code></pre><h3 id="9-python">9 python</h3>
<pre tabindex="0"><code>$ sudo apt-get install python3.5-dev python2.7-dev
</code></pre><h1 id="第三步-下载opencv源代码">第三步 下载opencv源代码</h1>
<pre tabindex="0"><code>$ cd ~
$ mkdir opencv
$ wget -O opencv.zip https://github.com/Itseez/opencv/archive/3.1.0.zip
$ unzip opencv.zip
$ wget -O opencv_contrib.zip https://github.com/Itseez/opencv_contrib/archive/3.1.0.zip
$ unzip opencv_contrib.zip
</code></pre><h1 id="第四步-配置python环境">第四步 配置python环境</h1>
<h3 id="1-下载安装pip">1 下载安装pip</h3>
<p>配置python环境第一步就是安装pip</p>
<pre tabindex="0"><code>$ cd ~
$ wget https://bootstrap.pypa.io/get-pip.py
$ sudo python get-pip.py
</code></pre><h3 id="2-安装python虚拟环境">2 安装python虚拟环境</h3>
<pre tabindex="0"><code>$ sudo pip install virtualenv virtualenvwrapper
$ sudo rm -rf ~/get-pip.py ~/.cache/pip
</code></pre><h3 id="3-修改bashrc文件">3 修改~/.bashrc文件</h3>
<p>(此处是为python虚拟环境添加变量)</p>
<pre tabindex="0"><code>$ vim ~/.bashrc
</code></pre><p>在末尾处添加</p>
<pre tabindex="0"><code># virtualenv and virtualenvwrapper
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh
</code></pre><p>保存退出</p>
<pre tabindex="0"><code>$ source ~/.bashrc
</code></pre><h3 id="4-创建python虚拟环境">4 创建python虚拟环境</h3>
<p>(本教程为python3方法,python2步骤类似)</p>
<pre tabindex="0"><code>$ mkvirtualenv cv -p python3
(此处 python2 即为 mkvirtualenv cv -p python2 ,以后步骤类似)
$ workon cv
</code></pre><p>如下图检测自己是否在虚拟环境中,如若不在,再执行workon cv
<img src="http://ww1.sinaimg.cn/large/005L13Yhgy1fic5ivytizj30kp0cjdfz.jpg" alt=""></p>
<h3 id="5-为虚拟环境安装numpy">5 为虚拟环境安装numpy</h3>
<pre tabindex="0"><code>$ pip install numpy
</code></pre><h1 id="第五步-配置和编译安装opencv">第五步 配置和编译安装opencv</h1>
<p><!-- raw HTML omitted -->请确保你在Python虚拟环境中<!-- raw HTML omitted --></p>
<pre tabindex="0"><code>$ cd /home/ssssix40/opencv/opencv-3.1.0
$ mkdir build
$ cd build
$ cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/usr/local \
    -D INSTALL_PYTHON_EXAMPLES=ON \
    -D INSTALL_C_EXAMPLES=OFF \
    -D OPENCV_EXTRA_MODULES_PATH=~/opencv/opencv_contrib-3.1.0/modules \
    -D PYTHON_EXECUTABLE=~/.virtualenvs/cv/bin/python \
    -D ENABLE_PRECOMPILED_HEADERS=OFF \
    -D BUILD_EXAMPLES=ON ..
</code></pre><p>完成之后应该会出现下面的内容
<img src="http://ww1.sinaimg.cn/large/005L13Yhgy1ficbknx4wuj30yc0domyo.jpg" alt=""></p>
<p>然后就是</p>
<pre tabindex="0"><code>$ make
//这里需要很长时间
$ sudo make install
$ sudo ldconfig
</code></pre><h1 id="第六步-完成安装">第六步 完成安装</h1>
<p>查看是否存在包</p>
<pre tabindex="0"><code>$ ls -l /usr/local/lib/python3.5/site-packages/
total 1972
-rw-r--r-- 1 root staff 2016816 Sep 13 17:24 cv2.cpython-35m-x86_64-linux-gnu.so
</code></pre><p>建立软链接</p>
<pre tabindex="0"><code>$ cd /usr/local/lib/python3.5/site-packages/
$ sudo mv cv2.cpython-35m-x86_64-linux-gnu.so cv2.so
$ cd ~/.virtualenvs/cv/lib/python3.5/site-packages/
$ ln -s /usr/local/lib/python3.5/site-packages/cv2.so cv2.so
</code></pre><p>测试opencv</p>
<pre tabindex="0"><code>$ cd ~
$ workon cv
$ python
Python 3.5.2 (default, Jul  5 2016, 12:43:10) 
[GCC 5.4.0 20160609] on linux
Type &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.
&gt;&gt;&gt; import cv2
&gt;&gt;&gt; cv2.__version__
&#39;3.1.0&#39;
&gt;&gt;&gt;
</code></pre><h1 id="问题解决">问题解决</h1>
<h3 id="1-opencv-31下载-ippicv_linux_20151201失败">1. OpenCV 3.1下载 ippicv_linux_20151201失败</h3>
<p><a href="http://blog.csdn.net/huangkangying/article/details/53406370">http://blog.csdn.net/huangkangying/article/details/53406370</a></p>
<h3 id="待续">待续</h3>

</content>
<p>
  
  <a href="http://localhost:1313/tags/python-opencv/">#python-opencv</a>
  
  <a href="http://localhost:1313/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">#环境搭建</a>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
